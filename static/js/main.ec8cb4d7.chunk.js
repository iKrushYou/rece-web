(this["webpackJsonprece-web"]=this["webpackJsonprece-web"]||[]).push([[0],{97:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(13),i=n.n(a),o=n(16),s=n(146),l=n(151),d=n(147),j=n(127),u=n(150),b=n(129),O=n(131),f=n(132),m=n(58),p=n(74),x=n.n(p),h=n(3),g=Object(j.a)((function(e){return{offset:e.mixins.toolbar}})),v=function(e){var t=e.children,n=g();return Object(h.jsxs)(u.a,{style:{paddingBottom:500},children:[Object(h.jsx)(b.a,{position:"fixed",children:Object(h.jsxs)(O.a,{children:[Object(h.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(h.jsx)(x.a,{})}),Object(h.jsx)(m.a,{variant:"h6",children:"Rece"})]})}),Object(h.jsx)(u.a,{className:n.offset}),t]})},y=n(9),w=n(31),I=n(133),C=n(149),T=n(135),k=n(136),P=n(137),S=n(138),F=n(139),M=n(154),B=n(140),N=n(152),R=n(141),z=n(57),E=n(153),D=n(17),W=n.n(D),A=n(14),V=function(e){return e.toUpperCase().split(" ").map((function(e){return e.substr(0,1)})).join("")},J=function(e){return Object(A.a)(new Set(e))},K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return isNaN(e)||isNaN(t)||0===t?0:(e/t*100).toFixed(n)},L=n(27);var q=function(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),r=Object(o.a)(n,2),a=r[0],i=r[1];return[a,function(t){try{var n=t instanceof Function?t(a):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]};function H(){var e=q("appData",{items:[],people:[],personToItemsMap:{},itemToPeopleMap:{},tip:0,tax:0}),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useMemo)((function(){return n.items.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(L.a)({},t.id,t.cost))}),{})}),[n.items]),i=Object(c.useMemo)((function(){return n.items.reduce((function(e,t){return W()(e).add(t.cost).dollars()}),0)}),[n.items]),s=W()(i).add(n.tax).add(n.tip).dollars(),l=function(e){var t;return(null===(t=n.personToItemsMap[e])||void 0===t?void 0:t.reduce((function(e,t){return W()(e).add(W()(a[t]).divide(n.itemToPeopleMap[t].length)).dollars()}),0))||0},d=function(e){return l(e)/i},j=function(e){return W()(n.tax).multiply(d(e)).dollars()},u=function(e){return W()(n.tip).multiply(d(e)).dollars()};return Object(y.a)(Object(y.a)({},n),{},{setAppData:r,addItem:function(e){r((function(t){return Object(y.a)(Object(y.a)({},t),{},{items:[].concat(Object(A.a)(t.items),[e])})}))},removeItem:function(e){r((function(t){return Object(y.a)(Object(y.a)({},t),{},{items:t.items.filter((function(t){return t.id!==e}))})}))},splitItem:function(e){var t=n.items.find((function(t){return t.id===e}));if(t){var c=parseInt(prompt("How many items should (".concat(t.name," - ").concat(W()(t.cost).format(),") be split into?"))||"");if(c&&!isNaN(c)){var a,i=(a=c,new Array(a).fill(0).map((function(e,t){return t}))).map((function(){return{id:Object(E.a)(),name:t.name,cost:t.cost/c}}));r((function(t){return Object(y.a)(Object(y.a)({},t),{},{items:[].concat(Object(A.a)(t.items.filter((function(t){return t.id!==e}))),Object(A.a)(i))})}))}}},updateItem:function(e){r((function(t){return Object(y.a)(Object(y.a)({},t),{},{items:t.items.map((function(t){return t.id===e.id?e:t}))})}))},addPerson:function(e){r((function(t){return Object(y.a)(Object(y.a)({},t),{},{people:[].concat(Object(A.a)(t.people),[e])})}))},removePerson:function(e){r((function(t){return Object(y.a)(Object(y.a)({},t),{},{people:t.people.filter((function(t){return t.id!==e}))})}))},handleSetItemPerson:function(e,t,n){r((function(c){var r=c.personToItemsMap,a=c.itemToPeopleMap;return r[t]||(r[t]=[]),r[t]=n?J([].concat(Object(A.a)(r[t]),[e])):r[t].filter((function(t){return t!==e})),a[e]||(a[e]=[]),a[e]=n?J([].concat(Object(A.a)(a[e]),[t])):a[e].filter((function(e){return e!==t})),Object(y.a)(Object(y.a)({},c),{},{personToItemsMap:r,itemToPeopleMap:a})}))},itemCostMap:a,subTotal:i,total:s,subTotalForPerson:l,taxForPerson:j,tipForPerson:u,totalForPerson:function(e){return W()(l(e)).add(j(e)).add(u(e)).dollars()}})}var U=n(55),G=n.n(U),Q=n(75),X=n.n(Q),Y={name:"",cost:void 0},Z=function(){var e=H(),t=e.setAppData,n=e.items,r=e.people,a=e.personToItemsMap,i=e.itemToPeopleMap,o=e.addItem,s=e.removeItem,l=e.splitItem,d=e.updateItem,j=e.handleSetItemPerson,b=e.subTotal,O=e.subTotalForPerson,p=e.tax,x=e.tip,g=e.total,v=e.taxForPerson,D=e.tipForPerson,A=e.totalForPerson,J=Object(z.b)({defaultValues:Y}),L=J.control,q=J.handleSubmit,U=J.reset,Q=Object(c.useRef)(null),Z=Object(c.useRef)(null),_=function(e){var t,n=e.name,c=e.cost,r={id:Object(E.a)(),name:n,cost:c};o(r),U(Y),null===(t=Q.current)||void 0===t||t.focus()},ee=function(e){return function(t){var n;"Enter"===t.code&&("name"===e?null===(n=Z.current)||void 0===n||n.focus():"cost"===e&&q(_)(t))}},te=Object(w.a)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m.a,{children:"Enter Receipt Items"}),Object(h.jsxs)(I.a,{container:!0,spacing:4,children:[Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)("form",{onSubmit:q(_),children:Object(h.jsxs)(I.a,{container:!0,spacing:2,alignItems:"flex-end",children:[Object(h.jsx)(I.a,{item:!0,xs:12,md:6,children:Object(h.jsx)(z.a,{control:L,name:"name",render:function(e){var t=e.field;return Object(h.jsx)(C.a,Object(y.a)(Object(y.a)({},t),{},{inputRef:function(e){Q.current=e,t.ref(e)},label:"Item Name",fullWidth:!0,onKeyDown:ee("name")}))}})}),Object(h.jsx)(I.a,{item:!0,xs:12,md:5,children:Object(h.jsx)(z.a,{control:L,name:"cost",render:function(e){var t=e.field;return Object(h.jsx)(C.a,Object(y.a)(Object(y.a)({},t),{},{inputRef:function(e){Z.current=e,t.ref(e)},label:"Cost",fullWidth:!0,onKeyDown:ee("cost"),type:"number"}))},rules:{required:!0,min:0}})}),Object(h.jsx)(I.a,{item:!0,xs:12,md:1,children:Object(h.jsx)(T.a,{variant:"contained",color:"primary",fullWidth:!0,children:"Add"})})]})})}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(u.a,{style:{overflow:"auto",position:"relative"},children:Object(h.jsxs)(k.a,{children:[Object(h.jsx)(P.a,{children:Object(h.jsxs)(S.a,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:101},children:[Object(h.jsx)(F.a,{style:{position:"sticky",left:0,backgroundColor:"white",zIndex:100,minWidth:100},children:"Name"}),Object(h.jsx)(F.a,{style:{minWidth:200},children:"Cost"}),Object(h.jsx)(F.a,{}),r.map((function(e){return Object(h.jsx)(F.a,{style:{width:1},children:Object(h.jsx)(M.a,{style:{height:24,width:24,fontSize:12},children:V(e.name)})},e.id)}))]})}),Object(h.jsxs)(B.a,{children:[n.map((function(e){var t;return Object(h.jsxs)(S.a,{children:[Object(h.jsx)(F.a,{style:{position:"sticky",left:0,zIndex:100,whiteSpace:"nowrap",backgroundColor:0===((null===(t=i[e.id])||void 0===t?void 0:t.length)||0)?te.palette.warning.light:"white"},children:e.name}),Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:Object(h.jsx)($,{value:e.cost,onChange:function(t){return d(Object(y.a)(Object(y.a)({},e),{},{cost:t}))},formatValue:function(e){return W()(e).format()}})}),Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:Object(h.jsxs)(u.a,{style:{display:"flex"},children:[Object(h.jsx)(f.a,{edge:"end",onClick:function(){return l(e.id)},children:Object(h.jsx)(X.a,{color:"primary"})}),Object(h.jsx)(f.a,{edge:"end",onClick:function(){confirm("Are you sure you'd like to remove this item?")&&s(e.id)},children:Object(h.jsx)(G.a,{color:"error"})})]})}),r.map((function(t){var n;return Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:Object(h.jsx)(N.a,{checked:(null===(n=a[t.id])||void 0===n?void 0:n.includes(e.id))||!1,onChange:function(n){return j(e.id,t.id,n.target.checked)}})},t.id)}))]},e.id)})),Object(h.jsxs)(S.a,{children:[Object(h.jsx)(F.a,{style:{position:"sticky",left:0,backgroundColor:"white",zIndex:100,whiteSpace:"nowrap"},children:"Subtotal"}),Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:Object(h.jsx)(T.a,{children:W()(b).format()})}),Object(h.jsx)(F.a,{}),r.map((function(e){return Object(h.jsx)(F.a,{children:W()(O(e.id)).format()},e.id)}))]}),Object(h.jsxs)(S.a,{children:[Object(h.jsxs)(F.a,{style:{position:"sticky",left:0,backgroundColor:"white",zIndex:100,whiteSpace:"nowrap"},children:["Tax (",K(p,b),"%)"]}),Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:Object(h.jsx)($,{value:p,onChange:function(e){return t((function(t){return Object(y.a)(Object(y.a)({},t),{},{tax:e})}))},formatValue:function(e){return W()(e).format()}})}),Object(h.jsx)(F.a,{}),r.map((function(e){return Object(h.jsx)(F.a,{children:W()(v(e.id)).format()},e.id)}))]}),Object(h.jsxs)(S.a,{children:[Object(h.jsx)(F.a,{style:{position:"sticky",left:0,backgroundColor:"white",zIndex:100,whiteSpace:"nowrap",paddingTop:0,paddingBottom:0},children:Object(h.jsxs)(u.a,{style:{display:"flex",alignItems:"center"},children:[Object(h.jsx)(m.a,{style:{marginRight:10},children:"Tip"}),Object(h.jsx)($,{value:x/b,onChange:function(e){return t((function(t){return Object(y.a)(Object(y.a)({},t),{},{tip:b*(e/100)})}))},formatValue:function(e){return"".concat((100*e).toFixed(2),"%")}})]})}),Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:Object(h.jsx)($,{value:x,onChange:function(e){return t((function(t){return Object(y.a)(Object(y.a)({},t),{},{tip:e})}))},formatValue:function(e){return W()(e).format()}})}),Object(h.jsx)(F.a,{}),r.map((function(e){return Object(h.jsx)(F.a,{children:W()(D(e.id)).format()},e.id)}))]})]}),Object(h.jsx)(R.a,{children:Object(h.jsxs)(S.a,{children:[Object(h.jsx)(F.a,{style:{position:"sticky",left:0,backgroundColor:"white",zIndex:100,whiteSpace:"nowrap",paddingTop:0,paddingBottom:0},children:"Total"}),Object(h.jsx)(F.a,{style:{paddingTop:0,paddingBottom:0},children:W()(g).format()}),Object(h.jsx)(F.a,{}),r.map((function(e){return Object(h.jsx)(F.a,{children:Object(h.jsx)(T.a,{onClick:function(){window.location.href=function(e){var t=e.txn,n=void 0===t?"charge":t,c=e.user,r=void 0===c?"":c,a=e.amount,i=e.note,o=void 0===i?"Split by Rece":i;return"venmo://paycharge?txn=".concat(n,"&recipients=").concat(r,"&amount=").concat(a,"&note=").concat(o)}({amount:A(e.id)})},children:W()(A(e.id)).format()})},e.id)}))]})})]})})})]})]})},$=function(e){var t=e.value,n=e.onChange,r=e.formatValue,a=void 0===r?function(e){return"".concat(e)}:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),l=s[0],d=s[1],j=Object(c.useRef)();return Object(c.useLayoutEffect)((function(){var e;l&&(null===(e=j.current)||void 0===e||e.focus())}),[l]),l?Object(h.jsx)(C.a,{placeholder:a(t),onChange:function(e){return n(parseFloat(e.target.value))},type:"number",onBlur:function(){return d(!1)},onKeyDown:function(e){["Enter","Escape"].includes(e.code)&&d(!1)},inputRef:j,style:{width:80,marginLeft:10}}):Object(h.jsx)(T.a,{onClick:function(){return d(!0)},children:a(t)})},_=n(134),ee=n(142),te=n(143),ne=n(144),ce=n(145),re=function(){var e=H(),t=e.people,n=e.addPerson,r=e.removePerson,a=Object(c.useState)(""),i=Object(o.a)(a,2),s=i[0],l=i[1],d=function(e){e&&(n({id:Object(E.a)(),name:e.trim()}),l(""))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m.a,{children:"Enter People"}),Object(h.jsxs)(I.a,{container:!0,spacing:4,children:[Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsxs)(I.a,{container:!0,spacing:2,alignItems:"flex-end",children:[Object(h.jsx)(I.a,{item:!0,xs:12,md:11,children:Object(h.jsx)(C.a,{value:s,onChange:function(e){return l(e.target.value)},label:"Person Name",fullWidth:!0,onKeyDown:function(e){"Enter"===e.code&&d(s)}})}),Object(h.jsx)(I.a,{item:!0,xs:12,md:1,children:Object(h.jsx)(T.a,{variant:"contained",color:"primary",onClick:function(){return d(s)},fullWidth:!0,children:"Add"})})]})}),Object(h.jsx)(I.a,{item:!0,xs:12,children:Object(h.jsx)(_.a,{children:t.map((function(e){return Object(h.jsxs)(ee.a,{children:[Object(h.jsx)(te.a,{children:Object(h.jsx)(M.a,{children:V(e.name)})}),Object(h.jsx)(ne.a,{primary:e.name}),Object(h.jsx)(ce.a,{children:Object(h.jsx)(f.a,{edge:"end",onClick:function(){return r(e.id)},children:Object(h.jsx)(G.a,{})})})]},e.id)}))})})]})]})};var ae=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(h.jsx)("div",{children:Object(h.jsx)(v,{children:Object(h.jsxs)(s.a,{children:[Object(h.jsxs)(l.a,{value:n,onChange:function(e,t){return r(t)},indicatorColor:"primary",textColor:"primary",centered:!0,style:{marginBottom:20},children:[Object(h.jsx)(d.a,{label:"Items"}),Object(h.jsx)(d.a,{label:"People"})]}),0===n&&Object(h.jsx)(Z,{}),1===n&&Object(h.jsx)(re,{})]})})})},ie=n(148);i.a.render(Object(h.jsxs)(r.a.StrictMode,{children:[Object(h.jsx)(ie.a,{}),Object(h.jsx)(ae,{})]}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.ec8cb4d7.chunk.js.map